<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Guru Coffee</title>
  <meta name="theme-color" content="#111" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <style>
    :root { --bg:#0f0f10; --card:#17181a; --text:#fff; --muted:#9aa0a6; --brand:#eab308; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,Segoe UI,Roboto,Arial}
    header{position:sticky;top:0;backdrop-filter:saturate(1.2) blur(10px);background:#0f0f10cc}
    .bar{display:flex;align-items:center;gap:.75rem;padding:.9rem 1rem;border-bottom:1px solid #222}
    .logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#222,#333)}
    h1{font-size:1.1rem;margin:0} .muted{color:var(--muted);font-size:.9rem}
    nav{display:flex;gap:.5rem;padding:.5rem 1rem 1rem;flex-wrap:wrap}
    nav button{padding:.55rem .8rem;border-radius:999px;border:1px solid #2a2b2f;background:var(--card);color:#fff;cursor:pointer}
    nav button.active{border-color:var(--brand);box-shadow:0 0 0 2px #000 inset;color:#111;background:var(--brand)}
    .wrap{max-width:900px;margin:0 auto;padding:1rem}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}
    .card{background:var(--card);border:1px solid #222;border-radius:16px;padding:1rem}
    .card h3{margin:.2rem 0 .4rem} .price{color:var(--brand);font-weight:700}
    .badge{display:inline-block;border:1px dashed #444;color:var(--muted);padding:.2rem .5rem;border-radius:999px;font-size:.8rem}
    .loyal{display:grid;grid-template-columns:repeat(7,28px);gap:.5rem;justify-content:flex-start;margin:.75rem 0}
    .stamp{width:28px;height:28px;border-radius:50%;border:2px solid #333;display:grid;place-items:center;font-size:.8rem}
    .stamp.on{background:var(--brand);color:#111;border-color:transparent}
    .row{display:flex;gap:.6rem;flex-wrap:wrap;margin:.6rem 0}
    input,select,button{border-radius:10px;border:1px solid #2a2b2f;background:#111;color:#fff;padding:.65rem .75rem}
    button.cta{background:var(--brand);color:#111;border:none;font-weight:700;cursor:pointer}
    footer{opacity:.7;text-align:center;padding:2rem 1rem}
    a{color:var(--brand);text-decoration:none}
  </style>
</head>
<body>
<header>
  <div class="bar">
    <div class="logo"></div>
    <div>
      <h1>Guru Coffee</h1>
      <div class="muted">–ö–∞—Ä—Ç–∞ —à—Ç–∞–º–ø—ñ–≤ ‚Ä¢ 7+1 –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</div>
    </div>
  </div>
  <nav>
    <button data-tab="loyalty" class="active">–ë–æ–Ω—É—Å–∏</button>
    <button data-tab="menu">–ú–µ–Ω—é</button>
    <button data-tab="promo">–ê–∫—Ü—ñ—ó</button>
    <button data-tab="contact">–ö–æ–Ω—Ç–∞–∫—Ç–∏</button>
  </nav>
</header>

<main class="wrap">
  <section id="loyalty" class="tab">
    <div class="card">
      <h3>–ö–∞—Ä—Ç–∞ —à—Ç–∞–º–ø—ñ–≤ (7+1)</h3>
      <div class="badge">–ó–±–∏—Ä–∞–π 7 —à—Ç–∞–º–ø—ñ–≤ ‚Äî 8-–π –Ω–∞–ø—ñ–π —É –ø–æ–¥–∞—Ä—É–Ω–æ–∫</div>
      <div class="loyal" id="stamps"></div>
      <div class="muted" id="loyalMsg"></div>
      <div class="row">
        <input id="stampCode" placeholder="–ö–æ–¥ —à—Ç–∞–º–ø—É –≤—ñ–¥ –±–∞—Ä–∏—Å—Ç–∞" />
        <button class="cta" id="addStamp">–î–æ–¥–∞—Ç–∏ —à—Ç–∞–º–ø</button>
        <button id="redeem" hidden>–û—Ç—Ä–∏–º–∞—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –Ω–∞–ø—ñ–π</button>
        <button id="reset" title="–°–∫–∏–Ω—É—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫">–°–∫–∏–Ω—É—Ç–∏</button>
      </div>
      <div class="muted">–ü–æ—Ä–∞–¥–∞: –∫–æ–¥ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –º–µ—Ä–µ–∂—ñ.</div>
    </div>
  </section>

  <section id="menu" class="tab" hidden>
    <div class="grid" id="menuGrid"></div>
  </section>

  <section id="promo" class="tab" hidden>
    <div class="grid" id="promoGrid"></div>
  </section>

  <section id="contact" class="tab" hidden>
    <div class="card">
      <h3>–õ–æ–∫–∞—Ü—ñ—ó</h3>
      <div id="locList"></div>
      <div class="row">
        <a id="tgOrder" class="badge" href="#" target="_blank">–ó–∞–º–æ–≤–∏—Ç–∏ —É Telegram</a>
        <a id="maps" class="badge" href="#" target="_blank">–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ Google Maps</a>
      </div>
    </div>
  </section>
</main>

<footer>¬© Guru Coffee ‚Ä¢ –ó –ª—é–±–æ–≤‚Äô—é –¥–æ –∫–∞–≤–∏ ‚òï</footer>

<script>
const DATA = {
  loyalty: { required: 7, secret: "GURU2025" },
  locations: [
    { id:"sumy-center", name:"–°—É–º–∏ ‚Ä¢ –¶–µ–Ω—Ç—Ä", maps:"https://maps.google.com", tg:"https://t.me/your_bot" }
  ],
  menu: [
    { id:"cap", title:"–ö–∞–ø—É—á—ñ–Ω–æ", price:75, tags:["–º–æ–ª–æ—á–Ω–∞"] },
    { id:"latte", title:"–õ–∞—Ç–µ", price:79, tags:["–º–æ–ª–æ—á–Ω–∞"] },
    { id:"americano", title:"–ê–º–µ—Ä–∏–∫–∞–Ω–æ", price:60, tags:["—á–æ—Ä–Ω–∞"] },
    { id:"raf", title:"–†–∞—Ñ –í–∞–Ω—ñ–ª—å–Ω–∏–π", price:95, tags:["—Å–æ–ª–æ–¥–∫–∞"] }
  ],
  promos: [
    { title:"-20% –∑ 8:00 –¥–æ 9:00", text:"–†–∞–Ω–∫–æ–≤–∞ –∫–∞–≤–∞ –≤–∏–≥—ñ–¥–Ω—ñ—à–µ." },
    { title:"2+1 —É –±—É–¥–Ω—ñ", text:"–¢—Ä–µ—Ç—ñ–π –Ω–∞–ø—ñ–π ‚Äî —É –ø–æ–¥–∞—Ä—É–Ω–æ–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥–∏." }
  ]
};

const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));
const state = {
  stamps: Number(localStorage.getItem("gc_stamps") || "0")
};

$$("nav button").forEach(btn=>{
  btn.onclick=()=>{
    $$(".tab").forEach(t=>t.hidden=true);
    $(`#${btn.dataset.tab}`).hidden=false;
    $$("nav button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
  };
});

function renderStamps(){
  const wrap = $("#stamps");
  wrap.innerHTML="";
  for(let i=0;i<DATA.loyalty.required;i++){
    const d=document.createElement("div");
    d.className="stamp"+(i<state.stamps?" on":"");
    d.textContent = i<state.stamps ? "‚úì" : i+1;
    wrap.appendChild(d);
  }
  const left = Math.max(0, DATA.loyalty.required - state.stamps);
  const eligible = state.stamps >= DATA.loyalty.required;
  $("#redeem").hidden = !eligible;
  $("#loyalMsg").textContent = eligible
    ? "–ì–æ—Ç–æ–≤–æ! –ù–∞—Ç–∏—Å–Ω–∏ ¬´–û—Ç—Ä–∏–º–∞—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –Ω–∞–ø—ñ–π¬ª –Ω–∞ –∫–∞—Å—ñ."
    : `–ó–∞–ª–∏—à–∏–ª–æ—Å—å –¥–æ –±–æ–Ω—É—Å—É: ${left} —à—Ç–∞–º–ø(–∏).`;
}
renderStamps();

$("#addStamp").onclick=()=>{
  const code = $("#stampCode").value.trim();
  if(state.stamps >= DATA.loyalty.required){
    alert("–°–ø–æ—á–∞—Ç–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –Ω–∞–ø—ñ–π (–∫–Ω–æ–ø–∫–∞ ¬´–û—Ç—Ä–∏–º–∞—Ç–∏‚Ä¶¬ª).");
    return;
  }
  if(code===DATA.loyalty.secret){
    state.stamps++;
    localStorage.setItem("gc_stamps", String(state.stamps));
    $("#stampCode").value="";
    renderStamps();
    alert("–®—Ç–∞–º–ø –¥–æ–¥–∞–Ω–æ!");
  }else{
    alert("–ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥ —à—Ç–∞–º–ø—É.");
  }
};

$("#redeem").onclick=()=>{
  if(state.stamps >= DATA.loyalty.required){
    state.stamps = 0;
    localStorage.setItem("gc_stamps", "0");
    renderStamps();
    alert("–ù–∞—Å–æ–ª–æ–¥–∂—É–π—Å—è –Ω–∞–ø–æ—î–º —É –ø–æ–¥–∞—Ä—É–Ω–æ–∫! üéâ");
  }
};

$("#reset").onclick=()=>{
  if(confirm("–°–∫–∏–Ω—É—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ —à—Ç–∞–º–ø—ñ–≤?")){
    state.stamps=0; localStorage.setItem("gc_stamps","0"); renderStamps();
  }
};

function renderMenu(){
  const grid = $("#menuGrid"); grid.innerHTML="";
  DATA.menu.forEach(item=>{
    const el=document.createElement("div");
    el.className="card";
    el.innerHTML = `
      <div class="badge">${item.tags.join(" ‚Ä¢ ")}</div>
      <h3>${item.title}</h3>
      <div class="price">${item.price} –≥—Ä–Ω</div>
      <div class="row">
        <button class="cta" onclick="order('${item.id}')">–ó–∞–º–æ–≤–∏—Ç–∏</button>
      </div>`;
    grid.appendChild(el);
  });
}
renderMenu();

function renderPromos(){
  const pg = $("#promoGrid");
  pg.innerHTML="";
  DATA.promos.forEach(p=>{
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`<h3>${p.title}</h3><div class="muted">${p.text}</div>`;
    pg.appendChild(c);
  });
}
renderPromos();

function renderContacts(){
  const loc = DATA.locations[0];
  $("#locList").innerHTML = `<div class="muted">${loc.name}</div>`;
  $("#tgOrder").href = loc.tg;
  $("#maps").href = loc.maps;
}
renderContacts();

function order(id){
  const item = DATA.menu.find(m=>m.id===id);
  const loc = DATA.locations[0];
  const msg = encodeURIComponent(`–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è: ${item.title} (${item.price} –≥—Ä–Ω) ‚Ä¢ –õ–æ–∫–∞—Ü—ñ—è: ${loc.name}`);
  window.open(loc.tg + (loc.tg.includes("?")?"&":"?") + "start=" + msg, "_blank");
}

if("serviceWorker" in navigator){
  window.addEventListener("load",()=>navigator.serviceWorker.register("./sw.js"));
}
</script>
</body>
</html>
